<!DOCTYPE html>

<html class="writer-html5" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="../img/favicon.ico" rel="shortcut icon"/>
<title>DIGG: Geburtsmeldungen für Krankenhäuser - Vertama: The Manuals</title>
<link href="../css/theme.css" rel="stylesheet"/>
<link href="../css/theme_extra.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" rel="stylesheet"/>
<link href="../css/extra.css" rel="stylesheet"/>
<link href="../css/pdf-print.css" rel="stylesheet"/>
<script>
        // Current page data
        var mkdocs_page_name = "DIGG: Geburtsmeldungen f\u00fcr Krankenh\u00e4user";
        var mkdocs_page_input_path = "digg-integration.md";
        var mkdocs_page_url = null;
      </script>
<!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
<script>hljs.highlightAll();</script>
<link href="../pdf/document.pdf" rel="alternate" title="PDF" type="application/pdf"/></head>
<body class="wy-body-for-nav" role="document">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side stickynav" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a class="icon icon-home" href=".."> Vertama: The Manuals
        </a>
</div>
<div aria-label="Navigation menu" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<ul>
<li class="toctree-l1"><a class="reference internal" href="..">Home</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Artikel</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../folder-sync-handbuch/">Folder Sync mit S3 Browser</a>
</li>
<li class="toctree-l1 current"><a class="reference internal current" href="#">DIGG: Geburtsmeldungen für Krankenhäuser</a>
<ul class="current">
<li class="toctree-l2"><a class="reference internal" href="#ablauf-des-meldeprozesses">Ablauf des Meldeprozesses</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#datenstruktur">Datenstruktur</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#api-integration-zur-vorbefullung-aus-dem-kis">API Integration zur Vorbefüllung aus dem KIS</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#1-memento-string-erhalten">1) Memento String erhalten</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#beispiel">Beispiel</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#endpunkt">Endpunkt</a>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#2-formularaufruf-aus-dem-kis">2) Formularaufruf aus dem KIS</a>
<ul>
<li class="toctree-l3"><a class="reference internal" href="#1-vorausgefullt-mit-memento-string">1. Vorausgefüllt mit Memento String</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="#2-leer-ohne-memento-string">2. Leer ohne Memento String</a>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../duba-integration/">DUBA Integration</a>
</li>
</ul>
<p class="caption"><span class="caption-text">misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../download/">PDF Download</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about/">About</a>
</li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift">
<nav aria-label="Mobile navigation menu" class="wy-nav-top" role="navigation">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="..">Vertama: The Manuals</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content"><div aria-label="breadcrumbs navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a aria-label="Docs" class="icon icon-home" href=".."></a></li>
<li class="breadcrumb-item">Artikel</li>
<li class="breadcrumb-item active">DIGG: Geburtsmeldungen für Krankenhäuser</li>
<li class="wy-breadcrumbs-aside">
</li>
</ul>
<hr/>
</div>
<div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<div class="section" itemprop="articleBody">
<h1 id="digg-geburtsmeldungen-fur-krankenhauser">DIGG: Geburtsmeldungen für Krankenhäuser</h1>
<p>Mit DIGG erfassen Sie notwendige Daten zur Geburtsanzeige und können diese
automatisiert und sicher an das Standesamt übermitteln.</p>
<p>Der Aufwand für den zuständigen Mitarbeiter wird dabei durch Vorbefüllung der bekannten Information aus der KIS Integration möglichst sowie der automatischen digitalen Übermittlung ans Standesamt minimiert. Bei Vollständiger Verfügbarkeit aller Daten durch das KIS ist auch ein komplett automatisierte Meldung möglich, ohne das weitere Mitarbeiter Interaktion zwingend erforderlich ist. </p>
<h2 id="ablauf-des-meldeprozesses">Ablauf des Meldeprozesses</h2>
<p>to be written</p>
<p>todo: insert form and page flow diagrams here</p>
<h3 id="datenstruktur">Datenstruktur</h3>
<p>Hier sehen Sie beispielhaft einen Datensatz der Geburtsvoranzeige. Mit allen oder auch nur Teilen dieser Daten aus dem KIS können die Formulare vorausgefüllt werden. </p>
<p><strong>JSON</strong> </p>
<pre><code class="language-json">{
  "kind": {
    "name": {
      "vorname": "Grant"
    },
    "geburtsdatum": "2024-01-02",
    "geburtsstunde": "12:34",
    "geburtsort": {
      "strasse": "Hauptstr.",
      "hausnummer": "1",
      "stadt": "Berlin",
      "ortsteil": "Tempelhof",
      "kreisbezeichnung": "Kreis Berlin"
    },
    "geschlecht": "WEIBLICH"
  },
  "mutter": {
    "name": {
      "nachname": "Anna",
      "vorname": "Müller"
    },
    "geschlecht": "WEIBLICH",
    "adresse": {
      "strasse": "Hauptstraße 9",
      "postleitzahl": "10111",
      "stadt": "Berlin"
    },
    "familienstand": "VERHEIRATET",
    "geburtsdatum": "1997-01-30",
    "kontakt": {
      "email": "joe@example.com",
      "telefon": "+49 172 1234567"
    }
  }
}
</code></pre>
<p><strong>application/x-www-form-urlencoded</strong></p>
<pre><code class="language-http">POST {{ host }}/api/v3/memento/route/geburtsbescheinigung
Authorization: Basic {{username}} {{password}}
Content-Type: application/x-www-form-urlencoded
X-CSRF-TOKEN: {{csrfToken}}

mutter.name.vorname=Edan  &amp;
mutter.geburtsdatum=1976-04-14  &amp;
mutter.familienstand=VERHEIRATET  &amp;
mutter.name.nachname=Richmond  &amp;
mutter.geschlecht=MAENNLICH  &amp;
mutter.adresse.strasse=Rocky Hague Drive 43c  &amp;
mutter.adresse.postleitzahl=83059  &amp;
mutter.adresse.stadt=Consectetur molliti  &amp;
mutter.kontakt.telefon=Ea molestiae beatae  &amp;
mutter.kontakt.email=lyhinodoga@example.com  &amp;
kind.name.vorname=Lane  &amp;
kind.geburtsdatum=1984-06-12  &amp;
kind.geschlecht=DIVERS  &amp;
kind.geburtsstunde=04:04  &amp;
kind.geburtsort.strasse=White New Drive 41b  &amp;
kind.geburtsort.ortsteil=Tempelhof &amp;
kind.geburtsort.stadt=Laufbach &amp;
kind.geburtsort.kreisbezeichnung=Beilingen
</code></pre>
<h2 id="api-integration-zur-vorbefullung-aus-dem-kis">API Integration zur Vorbefüllung aus dem KIS</h2>
<p>Diese Anleitung erklärt, wie Sie die Vertama DIGG API verwenden können um DIGG mit ihrem KIS zu integrieren. Die API bietet dabei die Möglichkeit mit Daten aus dem KIS System URLs/Links zu den Eingabeformularen zu generieren, die dann entsprechend mit allen Daten aus dem KIS System vorausgefüllt sind um somit die notwendigen manuellen Eingaben zu minimieren. Die generierten URLs sind cryptographisch gesichert und erlauben keinen Zugriff auf die Daten ausserhalb der DIGG Integration. Ein Eintrag solcher URLs in Logfiles oder sonstigen Protokollen oder Browsercaches ist somit unkritisch. Die eigentliche API Nutzung, sowie der Formular Zugriff durch HTTPS und TLS absichert. </p>
<p>Die Bespielhafte Nutzung der API ist technologieneutral mittels <code>curl</code> demostriert. Für notwendigen Accounts für einen Test- oder Produktivbetrieb wenden sie sich bitte direkt an Ihren Ansprechpartner bei Vertama. </p>
<p><em><code>TODO: overview of the complete flow here. KIS -- api --&gt; DIGG --&gt; KIS --&gt; BROWSER --&gt; DIGG --&gt; RKI --&gt; (BROWSER | KIS)</code></em></p>
<h2 id="1-memento-string-erhalten">1) Memento String erhalten</h2>
<p>Vertama DIGG Formulare können im Webbrowser vorausgefüllt aufgerufen werden. Diese Daten werden vom Vertama Server aus einem <code>Memento</code> ermittelt welcher der Formular URL in form the <code>m</code> Parameters mitgegeben werden kann. Das Memento ist verschluesselt und kann nur vom Vertama Server ausgelesen werden. Der Vertama Server speichert keine Daten, die Daten werden ausschlieslich im Memento gespeichert (client-side).</p>
<h3 id="beispiel">Beispiel</h3>
<p>Zur Veranschaulichung, hier beispielhaft eine Memento Anfrage mit <code>curl</code>: </p>
<pre><code class="language-bash">curl -X POST "https://elim.dev.vertamob.com/api/v3/memento/params" \
     -u "{username}:{password}" \
     -H "Content-Type: application/json" \
     -d '{
    "kind": {
        "name": {
            "vorname": "Grant"
        },
        "geburtsdatum": "2024-01-02",
        "geburtsstunde": "12:34",
        "geburtsort": {
            "strasse": "Hauptstr.",
            "hausnummer": "1",
            "stadt": "Berlin",
            "ortsteil": "Tempelhof",
            "kreisbezeichnung": "Kreis Berlin"
        },
        "geschlecht": "WEIBLICH"
    },
    "mutter": {
        "name": {
            "nachname": "Anna",
            "vorname": "Müller"
        },
        "geschlecht": "WEIBLICH",
        "adresse": {
            "strasse": "Hauptstraße 9",
            "postleitzahl": "10111",
            "stadt": "Berlin"
        },
        "familienstand": "VERHEIRATET",
        "geburtsdatum": "1997-01-30",
        "kontakt": {
            "email": "joe@example.com",
            "telefon": "+49 172 1234567"
        }
    }
}'
</code></pre>
<h3 id="endpunkt">Endpunkt</h3>
<p>Um einen Memento String zu erhalten, werden die Daten im JSON Format an folgenden Endpunkt
gesendet: https://elim.dev.vertamob.com/api/v3/memento/params</p>
<p>Die Authentifizierung erfolgt durch <code>Basic Auth</code>.</p>
<p>Als Response gibt die API ein JSON Objekt in folgender Form zurück:</p>
<pre><code class="language-json">{
  "m": "MementoString"
}
</code></pre>
<p>Sie benötigen den value vom "m" key. Das ist Ihr Memento String. </p>
<h2 id="2-formularaufruf-aus-dem-kis">2) Formularaufruf aus dem KIS</h2>
<p>Das DIGG Formular befindet sich unter <code>https://elim.dev.vertamob.com/digg/Geburtsbescheinigung</code> und kann direkt im Brower aufgerufen werden. Die Authentifizierung durch <code>Basic Auth</code>. Für vorausgefüllte Formulare kann der URL der optionala Memento Parameter <code>m</code> angehängt werden.</p>
<h3 id="1-vorausgefullt-mit-memento-string">1. Vorausgefüllt mit Memento String</h3>
<p>Haben Sie zuvor den Memento String aus Schritt 1 erhalten, können Sie diesen Nutzen, damit das Formular vorausgefüllt
ist. Dafür öffnen Sie im Browser die URL:</p>
<p><a href="https://{username}:{password}@elim.dev.vertamob.com/digg/Geburtsbescheinigung?m={memento}">https://{username}:{password}@elim.dev.vertamob.com/digg/Geburtsbescheinigung?m={memento}</a></p>
<ul>
<li>username: Ihr Benutzername</li>
<li>password: Ihr Passwort zu dem Benutzer</li>
<li>memento: Der aus Schritt 1 erhaltene Memento String</li>
</ul>
<h3 id="2-leer-ohne-memento-string">2. Leer ohne Memento String</h3>
<p>Um das Formular ohne Memento String aufzurufen (leer - ohne vorausgefüllte Felder), öffnen Sie in Ihrem Browser die URL:</p>
<p><a href="https://{username}:{password}@elim.dev.vertamob.com/digg/Geburtsbescheinigung">https://{username}:{password}@elim.dev.vertamob.com/digg/Geburtsbescheinigung</a></p>
<ul>
<li>username: Ihr Benutzername</li>
<li>password: Ihr Passwort zu dem Benutzer</li>
</ul>
</div>
</div><footer>
<div aria-label="Footer Navigation" class="rst-footer-buttons" role="navigation">
<a class="btn btn-neutral float-left" href="../folder-sync-handbuch/" title="Folder Sync mit S3 Browser"><span class="icon icon-circle-arrow-left"></span> Previous</a>
<a class="btn btn-neutral float-right" href="../duba-integration/" title="DUBA Integration">Next <span class="icon icon-circle-arrow-right"></span></a>
</div>
<hr/>
<div role="contentinfo">
<!-- Copyright etc -->
</div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
</div>
</div>
</section>
</div>
<div aria-label="Versions" class="rst-versions" role="note">
<span class="rst-current-version" data-toggle="rst-current-version">
<span><a href="../folder-sync-handbuch/" style="color: #fcfcfc">« Previous</a></span>
<span><a href="../duba-integration/" style="color: #fcfcfc">Next »</a></span>
</span>
</div>
<script src="../js/jquery-3.6.0.min.js"></script>
<script>var base_url = "..";</script>
<script src="../js/theme_extra.js"></script>
<script src="../js/theme.js"></script>
<script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>
</body>
</html>
